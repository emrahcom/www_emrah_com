<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="tr" lang="tr">
<head>
<meta http-equiv="CONTENT-TYPE" content="text/html; charset=UTF-8" />
<title>www.emrah.com_notlari.txt</title>
</head>
<body>
<pre><code>
# -----------------------------------------------------------------------------
# www.emrah.com notları
# -----------------------------------------------------------------------------

Bu dökümanda, www.emrah.com için yapılan işlemlerle ilgili notlar yer alır.



# -----------------------------------------------------------------------------
# WEB İÇERİĞİNİN GIT DEPOSU İLE YÖNETİLMESİ
# -----------------------------------------------------------------------------

# Git kurulumu (web sunucu, root)
    aptitude install git


# Ana Git deposunun oluşturulması (web sunucu, emrah)
    mkdir &tilde;/repositories
    cd &tilde;/repositories
    mkdir www_emrah_com.git
    cd www_emrah_com.git
    git init --bare


# Yerel Git deposunun oluşturulması (web sunucu, emrah)
    mkdir &tilde;/proje
    cd &tilde;/proje
    git clone --no-hardlinks &tilde;/repositories/www_emrah_com.git


# Yerel Git deposunun oluşturulması (desktop, emrah)
    mkdir &tilde;/proje
    cd &tilde;/proje
    git clone ssh://emrah@emrah.com:22/&tilde;/repositories/www_emrah_com.git


# Web içeriğinin Git depoya yüklenmesi (desktop, emrah)
    mkdir -p &tilde;/proje/www_emrah_com/public_html
    cd &tilde;/proje/www_emrah_com/public_html
    (web içeriği bu kısma yüklenir)

    mkdir -p &tilde;/proje/www_emrah_com/emrah_com_updates
    cd &tilde;/proje/www_emrah_com/emrah_com_updates
    (site ile ilgili scriptler buraya yüklenir)

    cd &tilde;/proje/www_emrah_com
    git add -A
    git commit -m &quot;web icerigi yuklendi&quot;
    git push origin master


# Web sunucudaki yerel deponun güncellenmesi (web sunucu, emrah)
    cd &tilde;/proje/www_emrah_com
    git pull


# Gitweb kurulumu (root)
  Nginx +  fastcgi ile kullanılacak.

    aptitude install gitweb fcgiwrap

    vim /etc/gitweb.conf
        #$projectroot = &quot;/var/cache/git&quot;;
        $projectroot = &quot;/home/emrah/repositories&quot;;


    vim /etc/nginx/sites-enabled/emrah.com
        root    /home/emrah/proje/www_emrah_com/public_html;

        location /gitweb {
            alias       /usr/share/gitweb;
            index       index.cgi;
            include     fastcgi_params;
            gzip        off;
            if ($uri &tilde; &quot;/gitweb/index.cgi&quot;) {
                fastcgi_pass    unix:/var/run/fcgiwrap.socket;
            }
        }


    /etc/init.d/fcgiwrap restart
    /etc/init.d/nginx configtest
    /etc/init.d/nginx restart



# -----------------------------------------------------------------------------
# WEB İÇERİĞİ GÜNCELLEME SCRIPTLERİNİN CRONTAB İLE ÇALIŞTIRILMASI
# -----------------------------------------------------------------------------

vim /etc/crontab
01 01   * * *   emrah   /home/emrah/proje/www_emrah_com/emrah_com_updates/update.py
03 01   * * *   emrah   /home/emrah/proje/www_emrah_com/emrah_com_updates/dilbert.py
05 01   * * *   emrah   /home/emrah/proje/www_emrah_com/emrah_com_updates/userfriendly.py
07 01   * * *   emrah   /home/emrah/proje/www_emrah_com/emrah_com_updates/txt2html.py
</code></pre>
</body>
</html>